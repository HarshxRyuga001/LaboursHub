<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login - LaboursHub</title>
    <link rel="stylesheet" href="./assets/css/styles.css" />
    <script src="./assets/js/script.js" defer></script>
    <script src="./assets/js/auth.js"></script>
    <script src="./assets/js/navbar.js"></script>
    <script src="./assets/js/script.js"></script>
  </head>

  <body>
    <!-- Navbar -->
    <header>
      <nav class="navbar">
        <div class="logo">Laburs<span>Hub</span></div>

        <div class="menu-toggle" id="menu-toggle">☰</div>

        <ul class="nav-links" id="nav-links">
          <li><a href="index.html">Home</a></li>
          <li><a href="dashboard.html">Dashboard</a></li>
          <li><a href="Q&A.HTML">FAQ</a></li>
          <li><a href="login.html" id="nav-login">Login</a></li>
          <li><a href="register.html" id="nav-register">Register</a></li>

          <li>
            <a href="profile.html" id="nav-profile" style="display: none"
              >Profile</a
            >
          </li>
          <li>
            <a href="/logout" id="nav-logout" style="display: none">Logout</a>
          </li>
        </ul>
      </nav>
    </header>

    <!-- ✅ Login Section -->
    <section class="auth-section">
      <div class="auth-container">
        <h2>Login</h2>
        <form class="auth-form" action="/login" method="POST">
          <!-- User Type Selection -->

          <select id="role" name="role" required>
            <option value="" disabled selected>Login as...</option>
            <option value="customer">Customer</option>
            <option value="labour">Labour</option>
          </select>

          <input
            type="email"
            placeholder="Email Address"
            name="email"
            id="email"
            required
          />
          <input
            type="password"
            placeholder="Password"
            name="password"
            id="password"
            required
          />

          <button type="submit">Login</button>
          <p class="switch-text">
            New here?
            <a href="register.html">Register</a>
          </p>
        </form>
        <div id="msg" class="error"></div>
      </div>
    </section>
    <script>
      // friendly error messages dikhane ka agar by chance server ne kuch error diya to
      const params = new URLSearchParams(location.search);
      if (params.get("err")) {
        document.getElementById("msg").textContent = decodeURIComponent(
          params.get("err")
        );
        console.log("err");
      }

      // const form = document.getElementById("auth-form");
      //       form.addEventListener("submit", async function (e) {
      //         e.preventDefault();

      //         const formData = {

      //           email: form.email.value,
      //           password: form.password.value,

      //         };

      // const res = await fetch("/login", {
      //   method: "POST",
      //   headers: { "Content-Type": "application/json" },
      //   body: JSON.stringify(formData),
      // });

      //         const data = res.json();

      //         if (email === "labour@gmail.com" && password  === "labour@123") {
      //           window.location.href = "./profile.html";
      //         } else {
      //           alert("Wrong Email or Password");
      //         }
      //       });

      // // Get the select element by its ID
      // const selectElement = document.getElementById("userType");

      // // Add an 'onchange' event listener to the select element
      // selectElement.onchange = function () {
      //   // Check if a value is selected and it's not the disabled "Login as..." option
      //   if (this.value) {
      //     // Redirect the user to the selected page
      //     window.location.href = this.value;
      //   }
      // };
    </script>
  </body>
</html>
